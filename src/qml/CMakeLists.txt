set(QT_USE_QTDECLARATIVE true)
set(VREEN_IMPORTS_DIR "${VREEN_IMPORTS_DIR}" CACHE INTERNAL "")

if(VREEN_WITH_AUTH_WIDGET)
    list(APPEND VREEN_PLUGIN_DEFINES "VREEN_WITH_OAUTH")
    list(APPEND VREEN_PLUGIN_LIBS vreenoauth)
    list(APPEND _extra_qt WebEngineWidgets)
endif()

add_qml_module(vreenplugin
    CXX14
    ${DEVELOPER_FLAG}
    URI Vreen.Base
    QML_DIR qmldir
    SOURCE_DIR src
    SOURCE_FILES ${EXTRA_SRC}
    LIBRARIES vreen ${VREEN_PLUGIN_LIBS}
    DEFINES ${VREEN_PLUGIN_DEFINES}
    INCLUDES ../api ${VREEN_INCLUDE_DIR} ${VREEN_INCLUDE_DIR}/${CMAKE_VREEN_VERSION_STRING}/
    IMPORTS_DIR ${VREEN_IMPORTS_DIR}
    QT Core Network Gui Widgets ${_extra_qt}
)
